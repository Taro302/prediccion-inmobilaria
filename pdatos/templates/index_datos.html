{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="wtamanioth=device-wtamanioth, initial-scale=1"
    />
    <!--    <link rel="stylesheet" href="{% static '/css/style_datos.css' %}" />-->
    <link rel="stylesheet" href="{% static '/css/style_datos2.css'%}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <title>DATOS CASA</title>
  </head>
  <body>
    <!-- metodo POST    -->
    <div class="container-fluid">
      <div class="">
        <div class="form-header">
          <div class="title">
            <h1>DATOS</h1>
          </div>
          <div class="d-flex justify-content-center align-items-center">
            <a
              href="{% url 'predict' %}"
              class="btn btn m-2"
              style="background-color: red"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="white"
                class="bi bi-database"
                viewBox="0 0 16 16"
              >
                <path
                  d="M4.318 2.687C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4c0-.374.356-.875 1.318-1.313ZM13 5.698V7c0 .374-.356.875-1.318 1.313C10.766 8.729 9.464 9 8 9s-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777A4.92 4.92 0 0 0 13 5.698ZM14 4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13V4Zm-1 4.698V10c0 .374-.356.875-1.318 1.313C10.766 11.729 9.464 12 8 12s-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777A4.92 4.92 0 0 0 13 8.698Zm0 3V13c0 .374-.356.875-1.318 1.313C10.766 14.729 9.464 15 8 15s-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13s3.022-.289 4.096-.777c.324-.147.633-.323.904-.525Z"
                /></svg
            ></a>

            <a
              href=" {% url 'home' %}"
              class="btn btn"
              style="background-color: rgba(10, 44, 61, 255)"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="white"
                class="bi bi-house-door-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z"
                /></svg
            ></a>
          </div>
        </div>
        <!--metodo buscar-->
        <div class="col-lg-12">
          <form method="GET" action="{% url 'buscar' %}">
            <!-- Campos de búsqueda -->
            <!-- ... tu código existente ... -->
            <div class="input-group d-flex justify-content-center">
              <div class="input-box mb-3">
                <label for="buscar_tamanio">Tamaño:</label>
                <input
                  type="number"
                  name="buscar_tamanio"
                  id="buscar_tamanio"
                  class="form-control"
                  value="{{ buscar_tamanio }}"
                />
              </div>
              <div class="input-box mx-3">
                <label for="buscar_distrito">Distrito:</label>
                <input
                  type="text"
                  name="buscar_distrito"
                  id="buscar_distrito"
                  class="form-control"
                  value="{{ buscar_distrito }}"
                />
              </div>
              <div class="input-box mb-3">
                <label for="buscar_habitaciones">Habitaciones:</label>
                <input
                  type="number"
                  name="buscar_habitaciones"
                  id="buscar_habitaciones"
                  class="form-control"
                  value="{{ buscar_habitaciones }}"
                />
              </div>
              <div class="input-box mx-3">
                <label for="buscar_banos">Baños:</label>
                <input
                  type="number"
                  name="buscar_banos"
                  id="buscar_banos"
                  class="form-control"
                  value="{{ buscar_banos }}"
                />
              </div>
              <div class="input-box mb-3">
                <label for="buscar_piscina">Piscina:</label>
                <input
                  type="number"
                  name="buscar_piscina"
                  id="buscar_piscina"
                  class="form-control"
                  value="{{ buscar_piscina }}"
                />
              </div>
              <div class="input-box mx-3">
                <label for="buscar_precio">Precio:</label>
                <input
                  type="number"
                  name="buscar_precio"
                  id="buscar_precio"
                  step="0.01"
                  class="form-control"
                  value="{{ buscar_precio }}"
                />
              </div>
            </div>
            <!-- Agrega más campos de búsqueda según sea necesario -->
            <div class="input-box d-grid gap-2 col-6 mx-auto">
              <button type="submit" class="continue-button">
                Buscar <ion-icon name="search-outline"></ion-icon>
              </button>
            </div>
          </form>
        </div>

        <form id="insert-form" method="POST" action="{% url 'insert' %}">
          {% csrf_token %}
          <div class="input-group">
            <div class="input-box mx-4">
              <label for="tamanio">Tamaño:</label>
              <input type="number" name="tamanio" required />
            </div>
            <div class="input-box">
              <label for="habitaciones">Habitaciones:</label>
              <input type="number" name="habitaciones" required />
            </div>
            <div class="input-box">
              <label for="banos">Baños:</label>
              <input type="number" name="banos" required />
            </div>
            <div class="input-box">
              <label for="estacionamiento">Estacionamiento:</label>
              <input type="number" name="estacionamiento" required />
            </div>
            <div class="input-box">
              <label for="piscina">Piscina:</label>
              <input type="number" name="piscina" required />
            </div>
            <div class="input-box">
              <label for="distrito">Distrito:</label>
              <input type="text" name="distrito" required />
            </div>
            <div class="input-box">
              <label for="precio">Precio:</label>
              <input type="number" name="precio" step="0.01" required />
            </div>
          </div>
          <div class="d-flex justify-content-center align-items-center">
            <div class="input-box">
              <button class="continue-button" type="submit">
                Agregar
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-house-add"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h4a.5.5 0 1 0 0-1h-4a.5.5 0 0 1-.5-.5V7.207l5-5 6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z"
                  />
                  <path
                    d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Zm-3.5-2a.5.5 0 0 0-.5.5v1h-1a.5.5 0 0 0 0 1h1v1a.5.5 0 1 0 1 0v-1h1a.5.5 0 1 0 0-1h-1v-1a.5.5 0 0 0-.5-.5Z"
                  />
                </svg>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- tabla y buscar    -->

    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12">
          <div class="table-resonsive">
            <table
              id="tabla-datos"
              class="table table-hover table-bordered text-center"
            >
              <!-- Tabla de resultados -->
              <!-- ... tu código existente ... -->
              <thead class="table-primary">
                <tr>
                  <th scope="col">Id</th>
                  <th scope="col">Tamaño</th>
                  <th scope="col">Habitaciones</th>
                  <th scope="col">Baños</th>
                  <th scope="col">Estacionamiento</th>
                  <th scope="col">Piscina</th>
                  <th scope="col">Distrito</th>
                  <th scope="col">Precio</th>
                </tr>
              </thead>
              <tbody>
                {% for d in data %}
                <tr>
                  <th scope="row">{{d.id}}</th>
                  <td>{{d.tamanio }}</td>
                  <td>{{d.habitaciones }}</td>
                  <td>{{d.banos }}</td>
                  <td>{{d.estacionamiento }}</td>
                  <td>{{d.piscina }}</td>
                  <td>{{d.distrito }}</td>
                  <td>$ {{ d.precio|intcomma }}</td>
                  <td>
                    <div
                      class="d-flex justify-content-center align-items-center"
                    >
                      <form
                        action="{% url 'updateData' d.id %}"
                        method="GET"
                        class="me-3"
                      >
                        {% csrf_token %}
                        <button type="submit" class="btn btn-primary">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            fill="currentColor"
                            class="bi bi-database-fill-gear"
                            viewBox="0 0 16 16"
                          >
                            <path
                              d="M8 1c-1.573 0-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4s.875 1.755 1.904 2.223C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777C13.125 5.755 14 5.007 14 4s-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1Z"
                            />
                            <path
                              d="M2 7v-.839c.457.432 1.004.751 1.49.972C4.722 7.693 6.318 8 8 8s3.278-.307 4.51-.867c.486-.22 1.033-.54 1.49-.972V7c0 .424-.155.802-.411 1.133a4.51 4.51 0 0 0-4.815 1.843A12.31 12.31 0 0 1 8 10c-1.573 0-3.022-.289-4.096-.777C2.875 8.755 2 8.007 2 7Zm6.257 3.998L8 11c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V10c0 1.007.875 1.755 1.904 2.223C4.978 12.711 6.427 13 8 13h.027a4.552 4.552 0 0 1 .23-2.002Zm-.002 3L8 14c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V13c0 1.007.875 1.755 1.904 2.223C4.978 15.711 6.427 16 8 16c.536 0 1.058-.034 1.555-.097a4.507 4.507 0 0 1-1.3-1.905Zm3.631-4.538c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382l.045-.148ZM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"
                            />
                          </svg>
                        </button>
                      </form>

                      <form
                        id="delete-form-{{ d.id }}"
                        method="POST"
                        action="{% url 'deleteData' d.id %}"
                      >
                        {% csrf_token %}
                        <button
                          type="button"
                          class="btn btn-danger"
                          onclick="confirmDelete('delete-form-{{ d.id }}')"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            fill="currentColor"
                            class="bi bi-house-x-fill"
                            viewBox="0 0 16 16"
                          >
                            <path
                              d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z"
                            />
                            <path
                              d="m8 3.293 4.712 4.712A4.5 4.5 0 0 0 8.758 15H3.5A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z"
                            />
                            <path
                              d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm-.646-4.854.646.647.646-.646a.5.5 0 0 1 .708.707l-.647.646.647.646a.5.5 0 0 1-.708.708l-.646-.647-.646.647a.5.5 0 0 1-.708-.707l.647-.647-.647-.646a.5.5 0 0 1 .708-.707Z"
                            />
                          </svg>
                        </button>
                      </form>
                    </div>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- 
    - ionicon link
  -->

    <!-- 
    - custom js link
  -->
    <script>
      function confirmDelete(formId) {
        if (confirm("¿Estás seguro de que deseas eliminar este registro?")) {
          // Si el usuario confirma la eliminación, envía el formulario correspondiente
          document.getElementById(formId).submit();
        }
      }
    </script>

    <script src="{% static 'js/script.js' %}"></script>

    <!-- Archivos CSS de DataTables -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css"
    />

    <!-- Archivos JS de DataTables -->
    <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>

    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
  </body>
</html>
